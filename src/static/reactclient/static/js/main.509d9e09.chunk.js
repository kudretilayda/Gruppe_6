(this.webpackJsonpbankproject=this.webpackJsonpbankproject||[]).push([[0],{233:function(e,t,n){e.exports=n(254)},254:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(21),c=n.n(o),s=n(11),i=n(12),u=n(44),l=n(14),m=n(6),f=n(15),d=n(8),h=n(20),g=n(30),p=n(31),b=n(319),E=n(320),y=n(321),v=n(9),O=n.n(v),j=(n(213),n(241),n(228)),C=n(74),I=n(322),S=n(295),P=n(255),k=n(324),D=n(256),R=n(292),A=n(293),w=n(294),x=n(258),N=n(4);var F=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),Object.defineProperty(Object(u.a)(a),T,{writable:!0,value:Object(r.createRef)()}),a.handleAvatarButtonClick=function(){a.setState({open:!a.state.open})},a.handleClose=function(){a.setState({open:!1})},a.handleSignOutButtonClicked=function(){O.a.auth().signOut()},a.state={open:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.user,r=this.state.open;return n?a.a.createElement("div",null,a.a.createElement(P.a,{className:t.avatarButton,ref:Object(d.a)(this,T)[T],onClick:this.handleAvatarButtonClick},a.a.createElement(k.a,{src:n.photoURL})),a.a.createElement(D.a,{open:r,anchorEl:Object(d.a)(this,T)[T].current,onClose:this.handleClose,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},a.a.createElement(R.a,{onClickAway:this.handleClose},a.a.createElement(j.a,{className:t.profileBox},a.a.createElement(C.a,{align:"center"},"Hello"),a.a.createElement(A.a,{className:t.divider}),a.a.createElement(C.a,{align:"center",variant:"body2"},n.displayName),a.a.createElement(C.a,{align:"center",variant:"body2"},n.email),a.a.createElement(A.a,{className:t.divider}),a.a.createElement(w.a,{container:!0,justify:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(x.a,{color:"primary",onClick:this.handleSignOutButtonClicked},"Logout"))))))):null}}]),n}(r.Component),T=Object(h.a)("avatarButtonRef"),L=Object(N.a)((function(e){return{avatarButton:{float:"right"},divider:{margin:e.spacing(1)},profileBox:{padding:e.spacing(1),background:e.palette.background.default}}}))(F);var B=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).handleTabChange=function(e,t){r.setState({tabindex:t})},r.state={tabindex:0},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.user;return a.a.createElement(j.a,{variant:"outlined"},a.a.createElement(L,{user:e}),a.a.createElement(C.a,{variant:"h3",component:"h1",align:"center"},"HdM Bank Administration"),a.a.createElement(C.a,{variant:"h4",component:"h2",align:"center"},"Client Advisor Home"),e?a.a.createElement(I.a,{indicatorColor:"primary",textColor:"primary",centered:!0,value:this.state.tabindex,onChange:this.handleTabChange},a.a.createElement(S.a,{label:"Customers",component:g.b,to:"/customers"}),a.a.createElement(S.a,{label:"All Accounts",component:g.b,to:"/accounts"}),a.a.createElement(S.a,{label:"About",component:g.b,to:"/about"})):null)}}]),n}(r.Component),M=n(47),U=n(302),J=n(304),V=n(97),_=n.n(V),W=n(224),z=n.n(W),H=function(){function e(){Object(s.a)(this,e),this.id=0}return Object(i.a)(e,[{key:"setID",value:function(e){this.id=e}},{key:"getID",value:function(){return this.id}},{key:"toString",value:function(){var e="";for(var t in this)e+=t+": "+this[t]+" ";return e}}]),e}();var q=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this)).first_name=e,a.last_name=r,a}return Object(i.a)(n,[{key:"setFirstName",value:function(e){this.first_name=e}},{key:"getFirstName",value:function(){return this.first_name}},{key:"setLastName",value:function(e){this.last_name=e}},{key:"getLastName",value:function(){return this.last_name}}],[{key:"fromJSON",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){Object.setPrototypeOf(e,n.prototype),t.push(e)}));else{var r=e;Object.setPrototypeOf(r,n.prototype),t.push(r)}return t}}]),n}(H);var Y=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e,r,a){var o;return Object(s.a)(this,n),(o=t.call(this)).source_account=e,o.target_account=r,o.amount=a,o}return Object(i.a)(n,[{key:"setSourceAccount",value:function(e){this.source_account=e}},{key:"getSourceAccount",value:function(){return this.source_account}},{key:"setTargetAccount",value:function(e){this.target_account=e}},{key:"getTargetAccount",value:function(){return this.target_account}},{key:"setType",value:function(e){this.type=e}},{key:"getType",value:function(){return this.type}},{key:"setAmount",value:function(e){this.amount=e}},{key:"getAmount",value:function(){return this.amount}}],[{key:"fromJSON",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){Object.setPrototypeOf(e,n.prototype),t.push(e)}));else{var r=e;Object.setPrototypeOf(r,n.prototype),t.push(r)}return t}}]),n}(H);Y.TYPE_CREDIT="credit",Y.TYPE_DEBIT="debit";var G=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).owner=e,r}return Object(i.a)(n,[{key:"setOwner",value:function(e){this.owner=e}},{key:"getOwner",value:function(){return this.owner}}],[{key:"fromJSON",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){Object.setPrototypeOf(e,n.prototype),t.push(e)}));else{var r=e;Object.setPrototypeOf(r,n.prototype),t.push(r)}return t}}]),n}(H),K=function(){function e(){var t=this;Object(s.a)(this,e),Object.defineProperty(this,X,{writable:!0,value:"/bank"}),Object.defineProperty(this,Z,{writable:!0,value:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"})}),Object.defineProperty(this,$,{writable:!0,value:"\u20ac"}),Object.defineProperty(this,ee,{writable:!0,value:function(){return"".concat(Object(d.a)(t,X)[X],"/customers")}}),Object.defineProperty(this,te,{writable:!0,value:function(){return"".concat(Object(d.a)(t,X)[X],"/customers")}}),Object.defineProperty(this,ne,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/customers/").concat(e)}}),Object.defineProperty(this,re,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/customers/").concat(e)}}),Object.defineProperty(this,ae,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/customers/").concat(e)}}),Object.defineProperty(this,oe,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/customers-by-name/").concat(e)}}),Object.defineProperty(this,ce,{writable:!0,value:function(){return"".concat(Object(d.a)(t,X)[X],"/accounts")}}),Object.defineProperty(this,se,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/customers/").concat(e,"/accounts")}}),Object.defineProperty(this,ie,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/customers/").concat(e,"/accounts")}}),Object.defineProperty(this,ue,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/accounts/").concat(e,"/balance")}}),Object.defineProperty(this,le,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/accounts/").concat(e)}}),Object.defineProperty(this,me,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/account/").concat(e,"/credits")}}),Object.defineProperty(this,fe,{writable:!0,value:function(e){return"".concat(Object(d.a)(t,X)[X],"/account/").concat(e,"/debits")}}),Object.defineProperty(this,de,{writable:!0,value:function(){return"".concat(Object(d.a)(t,X)[X],"/transactions")}}),Object.defineProperty(this,he,{writable:!0,value:function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()}))}})}return Object(i.a)(e,[{key:"getCurrencyFormatter",value:function(){return Object(d.a)(this,Z)[Z]}},{key:"getCurrency",value:function(){return Object(d.a)(this,$)[$]}},{key:"getCustomers",value:function(){return Object(d.a)(this,he)[he](Object(d.a)(this,ee)[ee]()).then((function(e){var t=q.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,ne)[ne](e)).then((function(e){var t=q.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"addCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,te)[te](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t=q.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"updateCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,re)[re](e.getID()),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t=q.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"deleteCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,ae)[ae](e),{method:"DELETE"}).then((function(e){var t=q.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"searchCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,oe)[oe](e)).then((function(e){var t=q.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getAllAccounts",value:function(){return Object(d.a)(this,he)[he](Object(d.a)(this,ce)[ce]()).then((function(e){var t=G.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getAccountsForCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,se)[se](e)).then((function(e){var t=G.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"deleteAccount",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,le)[le](e),{method:"DELETE"}).then((function(e){var t=G.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"addAccountForCustomer",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,ie)[ie](e),{method:"POST"}).then((function(e){var t=G.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"getBalanceOfAccount",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,ue)[ue](e)).then((function(e){return new Promise((function(t){t(e)}))}))}},{key:"getCreditsForAccount",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,me)[me](e)).then((function(e){var t=Y.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getDebitsForAccount",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,fe)[fe](e)).then((function(e){var t=Y.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"addTransaction",value:function(e){return Object(d.a)(this,he)[he](Object(d.a)(this,de)[de](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t=Y.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}}],[{key:"getAPI",value:function(){return null==Object(d.a)(this,Q)[Q]&&(Object(d.a)(this,Q)[Q]=new e),Object(d.a)(this,Q)[Q]}}]),e}(),Q=Object(h.a)("api"),X=Object(h.a)("bankServerBaseURL"),Z=Object(h.a)("currencyFormatter"),$=Object(h.a)("currency"),ee=Object(h.a)("getCustomersURL"),te=Object(h.a)("addCustomerURL"),ne=Object(h.a)("getCustomerURL"),re=Object(h.a)("updateCustomerURL"),ae=Object(h.a)("deleteCustomerURL"),oe=Object(h.a)("searchCustomerURL"),ce=Object(h.a)("getAllAccountsURL"),se=Object(h.a)("getAccountsForCustomerURL"),ie=Object(h.a)("addAccountsForCustomerURL"),ue=Object(h.a)("getBalanceForAccountURL"),le=Object(h.a)("deleteAccountIdURL"),me=Object(h.a)("getCreditsForAccountIdURL"),fe=Object(h.a)("getDebitsForAccountIdURL"),de=Object(h.a)("addTransactionURL"),he=Object(h.a)("fetchAdvanced");Object.defineProperty(K,Q,{writable:!0,value:null});var ge=n(323),pe=n(296),be=n(216),Ee=n.n(be);var ye=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty(Object(u.a)(e),ve,{writable:!0,value:"This should not have happend. Soooo sorry..."}),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.error,r=e.contextErrorMsg,o=e.onReload;return null!==n?a.a.createElement(ge.a,{severity:"error",className:t.root},a.a.createElement("div",null,Object(d.a)(this,ve)[ve]),a.a.createElement(pe.a,null,r),a.a.createElement("div",{className:t.margins},"Error message (for debugging only) is:"),a.a.createElement("div",null,n.message),o?a.a.createElement("div",{className:t.margins},a.a.createElement(x.a,{variant:"contained",color:"primary",startIcon:a.a.createElement(Ee.a,null),onClick:o},"Reload")):null):null}}]),n}(r.Component),ve=Object(h.a)("standardText"),Oe=Object(N.a)((function(e){return{margins:{marginTop:e.spacing(2)}}}))(ye),je=n(297);var Ce=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes;return e.show?a.a.createElement("div",{className:t.root},a.a.createElement(je.a,{color:"secondary"})):null}}]),n}(r.Component),Ie=Object(N.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2)}}}))(Ce),Se=n(68),Pe=n(298),ke=n(299),De=n(300),Re=n(301),Ae=n(303),we=n(64),xe=n.n(we);var Ne=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).addCustomer=function(){var e=new q(r.state.firstName,r.state.lastName);K.getAPI().addCustomer(e).then((function(e){r.setState(r.baseState),r.props.onClose(e)})).catch((function(e){return r.setState({updatingInProgress:!1,updatingError:e})})),r.setState({updatingInProgress:!0,updatingError:null})},r.updateCustomer=function(){var e=Object.assign(new q,r.props.customer);e.setFirstName(r.state.firstName),e.setLastName(r.state.lastName),K.getAPI().updateCustomer(e).then((function(t){r.setState({updatingInProgress:!1,updatingError:null}),r.baseState.firstName=r.state.firstName,r.baseState.lastName=r.state.lastName,r.props.onClose(e)})).catch((function(e){return r.setState({updatingInProgress:!1,updatingError:e})})),r.setState({updatingInProgress:!0,updatingError:null})},r.textFieldValueChange=function(e){var t,n=!1;0===e.target.value.trim().length&&(n=!0),r.setState((t={},Object(Se.a)(t,e.target.id,e.target.value),Object(Se.a)(t,e.target.id+"ValidationFailed",n),Object(Se.a)(t,e.target.id+"Edited",!0),t))},r.handleClose=function(){r.setState(r.baseState),r.props.onClose(null)};var a="",o="";return e.customer&&(a=e.customer.getFirstName(),o=e.customer.getLastName()),r.state={firstName:a,firstNameValidationFailed:!1,firstNameEdited:!1,lastName:o,lastNameValidationFailed:!1,lastNameEdited:!1,addingInProgress:!1,updatingInProgress:!1,addingError:null,updatingError:null},r.baseState=r.state,r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.customer,r=e.show,o=this.state,c=o.firstName,s=o.firstNameValidationFailed,i=o.firstNameEdited,u=o.lastName,l=o.lastNameValidationFailed,m=o.lastNameEdited,f=o.addingInProgress,d=o.addingError,h=o.updatingInProgress,g=o.updatingError,p="",b="";return n?(p="Update a customer",b="Customer ID: ".concat(n.getID())):(p="Create a new customer",b="Enter customer data"),r?a.a.createElement(Pe.a,{open:r,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"xs"},a.a.createElement(ke.a,{id:"form-dialog-title"},p,a.a.createElement(P.a,{"aria-label":"close",className:t.closeButton,onClick:this.handleClose},a.a.createElement(xe.a,null))),a.a.createElement(De.a,null,a.a.createElement(Re.a,null,b),a.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},a.a.createElement(U.a,{autoFocus:!0,type:"text",required:!0,fullWidth:!0,margin:"normal",id:"firstName",label:"First name:",value:c,onChange:this.textFieldValueChange,error:s,helperText:s?"The first name must contain at least one character":" "}),a.a.createElement(U.a,{type:"text",required:!0,fullWidth:!0,margin:"normal",id:"lastName",label:"Last name:",value:u,onChange:this.textFieldValueChange,error:l,helperText:l?"The last name must contain at least one character":" "})),a.a.createElement(Ie,{show:f||h}),n?a.a.createElement(Oe,{error:g,contextErrorMsg:"The customer ".concat(n.getID()," could not be updated."),onReload:this.updateCustomer}):a.a.createElement(Oe,{error:d,contextErrorMsg:"The customer could not be added.",onReload:this.addCustomer})),a.a.createElement(Ae.a,null,a.a.createElement(x.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),n?a.a.createElement(x.a,{disabled:s||l,variant:"contained",onClick:this.updateCustomer,color:"primary"},"Update"):a.a.createElement(x.a,{disabled:s||!i||l||!m,variant:"contained",onClick:this.addCustomer,color:"primary"},"Add"))):null}}]),n}(r.Component),Fe=Object(N.a)((function(e){return{root:{width:"100%"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(Ne),Te=n(325),Le=n(309),Be=n(311),Me=n(310),Ue=n(223),Je=n.n(Ue);var Ve=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).deleteCustomer=function(){K.getAPI().deleteCustomer(r.props.customer.getID()).then((function(e){r.setState({deletingInProgress:!1,deletingError:null}),r.props.onClose(r.props.customer)})).catch((function(e){return r.setState({deletingInProgress:!1,deletingError:e})})),r.setState({deletingInProgress:!0,deletingError:null})},r.handleClose=function(){r.props.onClose(null)},r.state={deletingInProgress:!1,deletingError:null},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.customer,r=e.show,o=this.state,c=o.deletingInProgress,s=o.deletingError;return r?a.a.createElement(Pe.a,{open:r,onClose:this.handleClose,"aria-labelledby":"delete-dialog-title"},a.a.createElement(ke.a,{id:"delete-dialog-title"},"Delete customer",a.a.createElement(P.a,{"aria-label":"close",className:t.closeButton,onClick:this.handleClose},a.a.createElement(xe.a,null))),a.a.createElement(De.a,null,a.a.createElement(Re.a,null,"Really delete customer '",n.getFirstName()," ",n.getLastName(),"' (ID: ",n.getID(),")?"),a.a.createElement(Ie,{show:c}),a.a.createElement(Oe,{error:s,contextErrorMsg:"The customer '".concat(n.getFirstName()," ").concat(n.getLastName(),"' (ID: ").concat(n.getID(),") could not be deleted."),onReload:this.deleteCustomer})),a.a.createElement(Ae.a,null,a.a.createElement(x.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),a.a.createElement(x.a,{variant:"contained",onClick:this.deleteCustomer,color:"primary"},"Delete"))):null}}]),n}(r.Component),_e=Object(N.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(Ve),We=n(268),ze=n(266),He=n(306),qe=n(307),Ye=n(222),Ge=n.n(Ye),Ke=n(221),Qe=n.n(Ke),Xe=n(120),Ze=n.n(Xe),$e=n(219),et=n(305),tt=n(220),nt=n.n(tt);var rt=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).initialState={customerName:"",transferAmount:"",targetCustomers:[],selectedCustomer:null,selectedAccount:null,transferAmountValidationFailed:!1,transferAmountFieldEdited:!1,loadingInProgress:!1,customerSearchError:null,transactionError:null},r.searchCustomer=Object($e.a)(Ze.a.mark((function e(){var t,n,a,o,c,s,i,u,l,m,f;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=r.state.customerName).length>0)){e.next=47;break}return e.prev=2,r.setState({targetCustomers:[],selectedCustomer:null,loadingInProgress:!0,customerSearchError:null}),e.next=6,K.getAPI().searchCustomer(t);case 6:n=e.sent,a=!0,o=!1,c=void 0,e.prev=10,s=n[Symbol.iterator]();case 12:if(a=(i=s.next()).done){e.next=21;break}return u=i.value,e.next=16,K.getAPI().getAccountsForCustomer(u.getID());case 16:l=e.sent,u.accounts=l;case 18:a=!0,e.next=12;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(10),o=!0,c=e.t0;case 27:e.prev=27,e.prev=28,a||null==s.return||s.return();case 30:if(e.prev=30,!o){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(27);case 35:m=null,f=null,n.length>0&&(m=n[0]),m.accounts.length>0&&(f=m.accounts[0]),r.setState({targetCustomers:n,selectedCustomer:m,selectedAccount:f,loadingInProgress:!1,customerSearchError:null}),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(2),r.setState({targetCustomers:[],selectedCustomer:null,loadingInProgress:!1,customerSearchError:e.t1});case 45:e.next=48;break;case 47:r.setState({customerNotFound:!0});case 48:case"end":return e.stop()}}),e,null,[[2,42],[10,23,27,35],[28,,30,34]])}))),r.transferMoney=function(){var e=r.props.account,t=r.state,n=t.selectedAccount,a=t.transferAmount.replace(/,/g,"."),o=new Y(e.getID(),n.getID(),a);K.getAPI().addTransaction(o).then((function(e){r.setState({loadingInProgress:!1,transactionError:null}),r.handleClose(e)})).catch((function(e){r.setState({loadingInProgress:!1,transactionError:e})})),r.setState({loadingInProgress:!0,transactionError:null})},r.handleClose=function(e){r.setState(r.initialState),r.props.onClose(e)},r.textFieldValueChange=function(e){var t=e.target.value;if("transferAmount"===e.target.id){var n=!1,a=t.replace(/,/g,".");0===a.length&&(n=!0),isNaN(a)&&(n=!0),r.setState({transferAmountValidationFailed:n,transferAmountFieldEdited:!0})}r.setState(Object(Se.a)({},e.target.id,t))},r.customerSelectionChange=function(e){var t=e.target.value,n=null;t.accounts.length>0&&(n=t.accounts[0]),r.setState({selectedCustomer:t,selectedAccount:n})},r.accountSelectionChange=function(e){var t=e.target.value;r.setState({selectedAccount:t})},r.state=r.initialState,r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.show,r=e.customer,o=e.account,c=this.state,s=c.customerName,i=c.targetCustomers,u=c.selectedCustomer,l=c.customerNotFound,m=c.selectedAccount,f=c.loadingInProgress,d=c.transferAmountValidationFailed,h=c.transferAmountFieldEdited,g=c.customerSearchError,p=c.transactionError;return n?a.a.createElement(Pe.a,{open:n,onClose:this.handleClose,"aria-labelledby":"money-transfer-dialog-title",maxWidth:"md"},a.a.createElement(ke.a,{id:"form-dialog-title"},"Transfer money",a.a.createElement(P.a,{"aria-label":"close",className:t.closeButton,onClick:this.handleClose},a.a.createElement(xe.a,null))),a.a.createElement(De.a,null,a.a.createElement(w.a,{container:!0,spacing:1},a.a.createElement(w.a,{item:!0,xs:6},a.a.createElement(C.a,{variant:"body1"},"From customer: ",r.getLastName(),", ",r.getFirstName())),a.a.createElement(w.a,{item:!0,xs:6},a.a.createElement(C.a,{variant:"body1"},"Account: ",o.getID()))),a.a.createElement(C.a,{variant:"body1"},a.a.createElement("br",null),"to customer:"),a.a.createElement("form",{noValidate:!0,autoComplete:"off"},0===i.length?a.a.createElement(U.a,{autoFocus:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"customerName",label:"Customer name:",onChange:this.textFieldValueChange,onBlur:this.searchCustomer,error:l,helperText:l?"No customers with the given name have been found":" ",InputProps:{endAdornment:a.a.createElement(J.a,{position:"end"},a.a.createElement(P.a,{onClick:this.searchCustomer},a.a.createElement(nt.a,null)))}}):a.a.createElement(U.a,{select:!0,autoFocus:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"customerName",label:"Customer name:",value:u,onChange:this.customerSelectionChange},this.state.targetCustomers.map((function(e){return a.a.createElement(et.a,{key:e.getID(),value:e},e.getLastName(),", ",e.getFirstName())}))),m?a.a.createElement(U.a,{select:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"account",label:"Target account:",value:m,onChange:this.accountSelectionChange},u.accounts.map((function(e){return a.a.createElement(et.a,{key:e.getID(),value:e},e.getID())}))):a.a.createElement(U.a,{select:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"account",label:"Target account:",value:0,onChange:this.accountSelectionChange},a.a.createElement(et.a,{value:0},"No accounts found")),a.a.createElement(U.a,{fullWidth:!0,margin:"normal",type:"text",required:!0,id:"transferAmount",label:"Amount:",onChange:this.textFieldValueChange,error:d,helperText:d?"The amount must be a number":" ",InputProps:{startAdornment:a.a.createElement(J.a,{position:"start"},K.getAPI().getCurrency())}})),a.a.createElement(Ie,{show:f}),a.a.createElement(Oe,{error:g,contextErrorMsg:"Customer ".concat(s," could not be searched."),onReload:this.searchCustomer}),a.a.createElement(Oe,{error:p,contextErrorMsg:"Transaction could not be executed.",onReload:this.transferMoney})),a.a.createElement(Ae.a,null,a.a.createElement(x.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),a.a.createElement(x.a,{disabled:!u||!m||!h||d,variant:"contained",color:"primary",onClick:this.transferMoney},"Transfer"))):null}}]),n}(r.Component),at=Object(N.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(rt);var ot=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).getBalance=function(){K.getAPI().getBalanceOfAccount(r.props.account.getID()).then((function(e){return r.setState({balance:e,loadingInProgress:!1,loadingError:null})})).catch((function(e){return r.setState({balance:null,loadingInProgress:!1,loadingError:e})})),r.setState({balance:"loading",loadingInProgress:!0,loadingError:null})},r.deleteAccount=function(){var e=r.props.account;K.getAPI().deleteAccount(e.getID()).then((function(){r.setState({deletingInProgress:!1,deletingError:null}),r.props.onAccountDeleted(e)})).catch((function(e){return r.setState({deletingInProgress:!1,deletingError:e})})),r.setState({deletingInProgress:!0,deletingError:null})},r.transferMoney=function(){r.setState({showMoneyTransferDialog:!0})},r.moneyTransferDialogClosed=function(e){r.setState({showMoneyTransferDialog:!1}),e&&r.getBalance()},r.state={balance:"",loadingInProgress:!1,deletingInProgress:!1,loadingError:null,deletingError:null,showMoneyTransferDialog:!1},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getBalance()}},{key:"componentDidUpdate",value:function(e){this.props.show&&this.props.show!==e.show&&this.getBalance()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.customer,r=e.account,o=this.state,c=o.loadingInProgress,s=o.deletingInProgress,i=o.loadingError,u=o.deletingError,l=o.balance,m=o.showMoneyTransferDialog;return a.a.createElement("div",null,a.a.createElement(We.a,null,a.a.createElement(C.a,{className:t.accountEntry},a.a.createElement(He.a,{component:g.b,to:{pathname:"/transactions",owner:{customer:n,account:r}}},"Account ID: ",r.getID())),a.a.createElement(C.a,{color:"textSecondary"},"Balance: ",isNaN(l)?l:K.getAPI().getCurrencyFormatter().format(l)),a.a.createElement(qe.a,null,a.a.createElement(x.a,{className:t.buttonMargin,variant:"outlined",color:"primary",size:"small",startIcon:a.a.createElement(Qe.a,null),onClick:this.transferMoney},"Transfer"),a.a.createElement(x.a,{color:"secondary",size:"small",startIcon:a.a.createElement(Ge.a,null),onClick:this.deleteAccount},"Delete"))),a.a.createElement(We.a,null,a.a.createElement(Ie,{show:c||s}),a.a.createElement(Oe,{error:i,contextErrorMsg:"The balance of account ".concat(r.getID()," could not be loaded."),onReload:this.getBalance}),a.a.createElement(Oe,{error:u,contextErrorMsg:"The account ".concat(r.getID()," could not be deleted."),onReload:this.deleteAccount})),a.a.createElement(at,{show:m,customer:n,account:r,onClose:this.moneyTransferDialogClosed}))}}]),n}(r.Component),ct=Object(N.a)((function(e){return{root:{width:"100%"},buttonMargin:{marginRight:e.spacing(2)},accountEntry:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0}}}))(ot);var st=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).getAccounts=function(){K.getAPI().getAccountsForCustomer(r.props.customer.getID()).then((function(e){return r.setState({accounts:e,loadingInProgress:!1,loadingAccountError:null})})).catch((function(e){return r.setState({accounts:[],loadingInProgress:!1,loadingAccountError:e})})),r.setState({loadingInProgress:!0,loadingAccountError:null})},r.addAccount=function(){K.getAPI().addAccountForCustomer(r.props.customer.getID()).then((function(e){r.setState({accounts:[].concat(Object(M.a)(r.state.accounts),[e]),loadingInProgress:!1,addingAccountError:null})})).catch((function(e){return r.setState({accounts:[],loadingInProgress:!1,addingAccountError:e})})),r.setState({loadingInProgress:!0,addingAccountError:null})},r.deleteAccountHandler=function(e){r.setState({accounts:r.state.accounts.filter((function(t){return t.getID()!==e.getID()}))})},r.state={accounts:[],loadingInProgress:!1,loadingAccountError:null,addingAccountError:null},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getAccounts()}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.customer,o=this.state,c=o.accounts,s=o.loadingInProgress,i=o.loadingAccountError,u=o.addingAccountError;return a.a.createElement("div",{className:n.root},a.a.createElement(ze.a,{className:n.accountList},c.map((function(t){return a.a.createElement(ct,{key:t.getID(),customer:r,account:t,onAccountDeleted:e.deleteAccountHandler,show:e.props.show})})),a.a.createElement(We.a,null,a.a.createElement(Ie,{show:s}),a.a.createElement(Oe,{error:i,contextErrorMsg:"List of accounts for customer ".concat(r.getID()," could not be loaded."),onReload:this.getAccounts}),a.a.createElement(Oe,{error:u,contextErrorMsg:"Account for customer ".concat(r.getID()," could not be added."),onReload:this.addAccount}))),a.a.createElement(x.a,{className:n.addAccountButton,variant:"contained",color:"primary",startIcon:a.a.createElement(_.a,null),onClick:this.addAccount},"Add Account"))}}]),n}(r.Component),it=Object(N.a)((function(e){return{root:{width:"100%"},accountList:{marginBottom:e.spacing(2)},addAccountButton:{position:"absolute",right:e.spacing(3),bottom:e.spacing(1)}}}))(st);var ut=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).expansionPanelStateChanged=function(){r.props.onExpandedStateChange(r.props.customer)},r.deleteAccountHandler=function(e){r.setState({accounts:r.state.accounts.filter((function(t){return t.getID()!==e.getID()}))})},r.editCustomerButtonClicked=function(e){e.stopPropagation(),r.setState({showCustomerForm:!0})},r.customerFormClosed=function(e){e?r.setState({customer:e,showCustomerForm:!1}):r.setState({showCustomerForm:!1})},r.deleteCustomerButtonClicked=function(e){e.stopPropagation(),r.setState({showCustomerDeleteDialog:!0})},r.deleteCustomerDialogClosed=function(e){e&&r.props.onCustomerDeleted(e),r.setState({showCustomerDeleteDialog:!1})},r.state={customer:e.customer,showCustomerForm:!1,showCustomerDeleteDialog:!1},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.expandedState,r=this.state,o=r.customer,c=r.showCustomerForm,s=r.showCustomerDeleteDialog;return a.a.createElement("div",null,a.a.createElement(Te.a,{defaultExpanded:!1,expanded:n,onChange:this.expansionPanelStateChanged},a.a.createElement(Le.a,{expandIcon:a.a.createElement(Je.a,null),"aria-controls":"customer".concat(o.getID(),"accountpanel-content"),id:"customer".concat(o.getID(),"accountpanel-header")},a.a.createElement(w.a,{container:!0,spacing:1,justify:"flex-start",alignItems:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(C.a,{variant:"body1",className:t.heading},o.getLastName(),", ",o.getFirstName())),a.a.createElement(w.a,{item:!0},a.a.createElement(Me.a,{variant:"text",size:"small"},a.a.createElement(x.a,{color:"primary",onClick:this.editCustomerButtonClicked},"edit"),a.a.createElement(x.a,{color:"secondary",onClick:this.deleteCustomerButtonClicked},"delete"))),a.a.createElement(w.a,{item:!0,xs:!0}),a.a.createElement(w.a,{item:!0},a.a.createElement(C.a,{variant:"body2",color:"textSecondary"},"List of accounts")))),a.a.createElement(Be.a,null,a.a.createElement(it,{show:n,customer:o}))),a.a.createElement(Fe,{show:c,customer:o,onClose:this.customerFormClosed}),a.a.createElement(_e,{show:s,customer:o,onClose:this.deleteCustomerDialogClosed}))}}]),n}(r.Component),lt=Object(N.a)((function(e){return{root:{width:"100%"}}}))(ut);var mt=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).getCustomers=function(){K.getAPI().getCustomers().then((function(e){return r.setState({customers:e,filteredCustomers:Object(M.a)(e),loadingInProgress:!1,error:null})})).catch((function(e){return r.setState({customers:[],loadingInProgress:!1,error:e})})),r.setState({loadingInProgress:!0,error:null})},r.onExpandedStateChange=function(e){var t=null;e.getID()!==r.state.expandedCustomerID&&(t=e.getID()),r.setState({expandedCustomerID:t})},r.customerDeleted=function(e){var t=r.state.customers.filter((function(t){return t.getID()!==e.getID()}));r.setState({customers:t,filteredCustomers:Object(M.a)(t),showCustomerForm:!1})},r.addCustomerButtonClicked=function(e){e.stopPropagation(),r.setState({showCustomerForm:!0})},r.customerFormClosed=function(e){if(e){var t=[].concat(Object(M.a)(r.state.customers),[e]);r.setState({customers:t,filteredCustomers:Object(M.a)(t),showCustomerForm:!1})}else r.setState({showCustomerForm:!1})},r.filterFieldValueChange=function(e){var t=e.target.value.toLowerCase();r.setState({filteredCustomers:r.state.customers.filter((function(e){var n=e.getFirstName().toLowerCase().includes(t),r=e.getLastName().toLowerCase().includes(t);return n||r})),customerFilter:t})},r.clearFilterFieldButtonClicked=function(){r.setState({filteredCustomers:Object(M.a)(r.state.customers),customerFilter:""})};var a=null;return r.props.location.expandCustomer&&(a=r.props.location.expandCustomer.getID()),r.state={customers:[],filteredCustomers:[],customerFilterStr:"",error:null,loadingInProgress:!1,expandedCustomerID:a,showCustomerForm:!1},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getCustomers()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,r=n.filteredCustomers,o=n.customerFilter,c=n.expandedCustomerID,s=n.loadingInProgress,i=n.error,u=n.showCustomerForm;return a.a.createElement("div",{className:t.root},a.a.createElement(w.a,{className:t.customerFilter,container:!0,spacing:1,justify:"flex-start",alignItems:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(C.a,null,"Filter customer list by name:")),a.a.createElement(w.a,{item:!0,xs:4},a.a.createElement(U.a,{autoFocus:!0,fullWidth:!0,id:"customerFilter",type:"text",value:o,onChange:this.filterFieldValueChange,InputProps:{endAdornment:a.a.createElement(J.a,{position:"end"},a.a.createElement(P.a,{onClick:this.clearFilterFieldButtonClicked},a.a.createElement(z.a,null)))}})),a.a.createElement(w.a,{item:!0,xs:!0}),a.a.createElement(w.a,{item:!0},a.a.createElement(x.a,{variant:"contained",color:"primary",startIcon:a.a.createElement(_.a,null),onClick:this.addCustomerButtonClicked},"Add Customer"))),r.map((function(t){return a.a.createElement(lt,{key:t.getID(),customer:t,expandedState:c===t.getID(),onExpandedStateChange:e.onExpandedStateChange,onCustomerDeleted:e.customerDeleted})})),a.a.createElement(Ie,{show:s}),a.a.createElement(Oe,{error:i,contextErrorMsg:"The list of customers could not be loaded.",onReload:this.getCustomers}),a.a.createElement(Fe,{show:u,onClose:this.customerFormClosed}))}}]),n}(r.Component),ft=Object(p.f)(Object(N.a)((function(e){return{root:{width:"100%"},customerFilter:{marginTop:e.spacing(2),marginBottom:e.spacing(1)}}}))(mt)),dt=n(312),ht=n(313),gt=n(314),pt=n(315),bt=n(316),Et=n(317),yt=n(225),vt=n.n(yt);var Ot=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).getTransactions=function(){var e=r.props.location.owner.account;K.getAPI().getCreditsForAccount(e.getID()).then((function(t){t.forEach((function(e){return e.setType(Y.TYPE_CREDIT)})),K.getAPI().getDebitsForAccount(e.getID()).then((function(e){e.forEach((function(e){return e.setType(Y.TYPE_DEBIT)}));var n=t.concat(e);n.sort(r.transactionComparator),r.setState({transactions:n,transactionsLoadingInProgress:!1,debitsLoadingError:null})})).catch((function(e){return r.setState({transactions:[],debitsLoadingError:e,transactionsLoadingInProgress:!1})})),r.setState({creditsLoadingError:null})})).catch((function(e){return r.setState({transactions:[],transactionsLoadingInProgress:!1,creditsLoadingError:e})})),r.setState({transactionsLoadingInProgress:!0,creditsLoadingError:null,debitsLoadingError:null})},r.state={transactions:[],transactionsLoadingInProgress:!1,creditsLoadingError:null,debitsLoadingError:null},r}return Object(i.a)(n,[{key:"transactionComparator",value:function(e,t){var n=0;return e.getID()<t.getID()&&(n=-1),e.getID()>t.getID()&&(n=1),n}},{key:"componentDidMount",value:function(){this.props.location.owner&&this.getTransactions()}},{key:"renderTransactionRow",value:function(e,t){var n=K.getAPI().getCurrencyFormatter();return a.a.createElement(dt.a,{key:e.getID()},a.a.createElement(ht.a,{align:"center",component:"th",scope:"row"},e.getID()),a.a.createElement(ht.a,{align:"center"},e.getSourceAccount()),a.a.createElement(ht.a,{align:"center"},e.getTargetAccount()),e.getType()===Y.TYPE_CREDIT?a.a.createElement(a.a.Fragment,null,a.a.createElement(ht.a,{align:"right"},n.format(e.getAmount())),a.a.createElement(ht.a,{align:"right"})):a.a.createElement(a.a.Fragment,null,a.a.createElement(ht.a,{align:"left"}),a.a.createElement(ht.a,{align:"left"},n.format(e.getAmount()))),a.a.createElement(ht.a,{align:"center"},n.format(t)))}},{key:"renderTransactions",value:function(){var e=this,t=0;return this.state.transactions.map((function(n){return n.getType()===Y.TYPE_CREDIT?t+=n.getAmount():t-=n.getAmount(),e.renderTransactionRow(n,t)}))}},{key:"renderTransactionTable",value:function(){var e=this.state,t=e.transactionsLoadingInProgress,n=e.creditsLoadingError,r=e.debitsLoadingError;if(!t&&!n&&!r)return a.a.createElement(gt.a,{component:j.a},a.a.createElement(C.a,{className:this.props.classes.tableHeader},"List of transactions:"),a.a.createElement(pt.a,{"aria-label":"Debit/credit transactions table"},a.a.createElement(bt.a,null,a.a.createElement(dt.a,null,a.a.createElement(ht.a,{align:"center"},"ID"),a.a.createElement(ht.a,{align:"center"},"Source account"),a.a.createElement(ht.a,{align:"center"},"Target account"),a.a.createElement(ht.a,{align:"right"},"Credit"),a.a.createElement(ht.a,{align:"left"},"Debit"),a.a.createElement(ht.a,{align:"center"},"Balance"))),a.a.createElement(Et.a,null,this.renderTransactions())))}},{key:"render",value:function(){var e=this.props.classes;if(!this.props.location.owner)return a.a.createElement(p.a,{to:"/"});var t=this.props.location.owner,n=t.customer,r=t.account,o=this.state,c=o.transactionsLoadingInProgress,s=o.creditsLoadingError,i=o.debitsLoadingError;return a.a.createElement("div",null,a.a.createElement(C.a,{component:"div",className:e.subNav},a.a.createElement(He.a,{component:g.b,to:{pathname:"/customers",expandCustomer:n}},a.a.createElement(w.a,{container:!0,spacing:1,justify:"flex-start",alignItems:"stretch"},a.a.createElement(w.a,{item:!0},a.a.createElement(vt.a,null)),a.a.createElement(w.a,{item:!0},"Back to customer list")))),a.a.createElement(j.a,{className:e.root},a.a.createElement(C.a,{variant:"h6"},"Account"),a.a.createElement(C.a,{className:e.accountEntry},"ID: ",r.getID()),a.a.createElement(C.a,null,"Customer: ",n.getLastName(),", ",n.getFirstName())),this.renderTransactionTable(),a.a.createElement(Ie,{show:c}),a.a.createElement(Oe,{error:s,contextErrorMsg:"The credits of account ".concat(this.accountID," could not be loaded."),onReload:this.getTransactions}),a.a.createElement(Oe,{error:i,contextErrorMsg:"The debits of account ".concat(this.accountID," could not be loaded."),onReload:this.getTransactions}))}}]),n}(r.Component),jt=Object(p.f)(Object(N.a)((function(e){return{root:{width:"100%",padding:e.spacing(1)},subNav:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},tableHeader:{marginLeft:e.spacing(1),marginTop:e.spacing(2)}}}))(Ot)),Ct=n(318),It=Object(Ct.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(1)},content:{margin:e.spacing(1)}}}));var St=function(){var e=It();return a.a.createElement(j.a,{elevation:0,className:e.root},a.a.createElement("div",{className:e.content},a.a.createElement(C.a,{variant:"h6"},"Python Bank Administration Example Project"),a.a.createElement("br",null),a.a.createElement(C.a,null,"React Frontend written by ",a.a.createElement(He.a,{href:"https://github.com/christophkunz"},"Christoph Kunz")),a.a.createElement(C.a,null,"Python Backend written by ",a.a.createElement(He.a,{href:"https://github.com/PeterThies"},"Peter Thies")),a.a.createElement("br",null),a.a.createElement(C.a,{variant:"body2"},"\xa9 Hochschule der Medien 2020, all rights reserved.")))};var Pt=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).getCustomer=function(){K.getAPI().getCustomer(r.props.customerID).then((function(e){return r.setState({customer:e,loadingInProgress:!1,loadingError:null})})).catch((function(e){return r.setState({customer:null,loadingInProgress:!1,loadingError:e})})),r.setState({loadingInProgress:!0,loadingError:null})},r.state={customer:null,loadingInProgress:!1,loadingError:null},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getCustomer()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.customerID,r=e.accountID,o=this.state,c=o.customer,s=o.loadingInProgress,i=o.loadingError;return a.a.createElement(j.a,{variant:"outlined",className:t.root},a.a.createElement(C.a,{variant:"h6"},"Account"),a.a.createElement(C.a,{className:t.accountEntry},"ID: ",r),c?a.a.createElement(C.a,null,"Customer: ",c.getLastName(),", ",c.getFirstName()):null,a.a.createElement(Ie,{show:s}),a.a.createElement(Oe,{error:i,contextErrorMsg:"The data of customer id ".concat(n," could not be loaded."),onReload:this.getCustomer}))}}]),n}(r.Component),kt=Object(N.a)((function(e){return{root:{width:"100%",padding:e.spacing(1),marginTop:e.spacing(1)},accountEntry:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0}}}))(Pt);var Dt=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).loadAccounts=function(){K.getAPI().getAllAccounts().then((function(e){return r.setState({accounts:e,loadingInProgress:!1,loadingError:null})})).catch((function(e){return r.setState({loadingInProgress:!1,loadingError:e})})),r.setState({loadingInProgress:!0,loadingError:null})},r.state={accounts:[],loadingInProgress:!1,loadingError:null},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadAccounts()}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.accounts,r=t.loadingInProgress,o=t.loadingError;return a.a.createElement("div",{className:e.root},n.map((function(e){return a.a.createElement(kt,{key:e.getID(),customerID:e.getOwner().toString(),accountID:e.getID().toString()})})),a.a.createElement(Ie,{show:r}),a.a.createElement(Oe,{error:o,contextErrorMsg:"The list of all accounts of the bank could not be loaded.",onReload:this.loadAccounts}))}}]),n}(r.Component),Rt=Object(N.a)((function(e){return{root:{width:"100%"}}}))(Dt),At=n(226),wt=n(10),xt="#FFFFFF",Nt=Object(At.a)({palette:{black:"#000000",white:xt,primary:{contrastText:xt,dark:wt.a.indigo[900],main:wt.a.indigo[500],light:wt.a.indigo[100]},secondary:{contrastText:xt,dark:wt.a.blue[900],main:wt.a.blue.A400,light:wt.a.blue.A400},success:{contrastText:xt,dark:wt.a.green[900],main:wt.a.green[600],light:wt.a.green[400]},info:{contrastText:xt,dark:wt.a.blue[900],main:wt.a.blue[600],light:wt.a.blue[400]},warning:{contrastText:xt,dark:wt.a.orange[900],main:wt.a.orange[600],light:wt.a.orange[400]},error:{contrastText:xt,dark:wt.a.red[900],main:wt.a.red[600],light:wt.a.red[400]},text:{primary:wt.a.blueGrey[800],secondary:wt.a.blueGrey[600],link:wt.a.blue[600]},background:{default:"#F4F6F8",paper:xt},icon:wt.a.blueGrey[600],divider:wt.a.grey[200]}});var Ft=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleSignInButtonClicked=function(){e.props.onSignIn()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",null,a.a.createElement(C.a,{className:e.root,align:"center",variant:"h6"},"Welcome to the HdM React/Python Project Showcase"),a.a.createElement(C.a,{className:e.root,align:"center"},"It appears, that you are not signed in."),a.a.createElement(C.a,{className:e.root,align:"center"},"To use the services of the HdM Bank please"),a.a.createElement(w.a,{container:!0,justify:"center"},a.a.createElement(w.a,{item:!0},a.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.handleSignInButtonClicked},"Sign in with Google"))))}}]),n}(r.Component),Tt=Object(N.a)((function(e){return{root:{margin:e.spacing(2)}}}))(Ft);var Lt=function(e){Object(f.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(m.a)(e);if(t()){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object.defineProperty(Object(u.a)(r),Bt,{writable:!0,value:{apiKey:"AIzaSyDP7u7KNLeF7-UoXa3OxQv00l1oWKziETA",authDomain:"python-bankprojekt-thies.firebaseapp.com",databaseURL:"https://python-bankprojekt-thies.firebaseio.com",projectId:"python-bankprojekt-thies",storageBucket:"python-bankprojekt-thies.appspot.com",messagingSenderId:"152608653446",appId:"1:152608653446:web:5c61ccd44caf691cde9107"}}),r.handleAuthStateChange=function(e){e?(r.setState({authLoading:!0}),e.getIdToken().then((function(t){document.cookie="token=".concat(t,";path=/"),r.setState({currentUser:e,authError:null,authLoading:!1})})).catch((function(e){r.setState({authError:e,authLoading:!1})}))):(document.cookie="token=;path=/",r.setState({currentUser:null,authLoading:!1}))},r.handleSignIn=function(){r.setState({authLoading:!0});var e=new O.a.auth.GoogleAuthProvider;O.a.auth().signInWithRedirect(e)},r.state={currentUser:null,appError:null,authError:null,authLoading:!1},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){O.a.initializeApp(Object(d.a)(this,Bt)[Bt]),O.a.auth().languageCode="en",O.a.auth().onAuthStateChanged(this.handleAuthStateChange)}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.appError,r=e.authError,o=e.authLoading;return a.a.createElement(b.a,{theme:Nt},a.a.createElement(E.a,null),a.a.createElement(g.a,{basename:"/static/reactclient"},a.a.createElement(y.a,{maxWidth:"md"},a.a.createElement(B,{user:t}),t?a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{from:"/",to:"customers"}),a.a.createElement(p.b,{exact:!0,path:"/customers"},a.a.createElement(ft,null)),a.a.createElement(p.b,{path:"/transactions"},a.a.createElement(jt,null)),a.a.createElement(p.b,{path:"/accounts"},a.a.createElement(Rt,null)),a.a.createElement(p.b,{path:"/about",component:St})):a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{to:"/index.html"}),a.a.createElement(Tt,{onSignIn:this.handleSignIn})),a.a.createElement(Ie,{show:o}),a.a.createElement(Oe,{error:r,contextErrorMsg:"Something went wrong during sighn in process.",onReload:this.handleSignIn}),a.a.createElement(Oe,{error:n,contextErrorMsg:"Something went wrong inside the app. Please reload the page."}))))}}],[{key:"getDerivedStateFromError",value:function(e){return{appError:e}}}]),n}(a.a.Component),Bt=Object(h.a)("firebaseConfig"),Mt=Lt;c.a.render(a.a.createElement(Mt,null),document.getElementById("root"))}},[[233,1,2]]]);
//# sourceMappingURL=main.509d9e09.chunk.js.map